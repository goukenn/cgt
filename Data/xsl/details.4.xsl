<xsl:stylesheet xmlns="http://www.w3.org/1999/xhtml" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:cgt="http://pivot.tourismewallonie.be/files/xsd/pivot/3.1" xmlns:fn="http://www.w3.org/2005/xpath-functions" version="2.0"><xsl:output method="xml" version="1.0" encoding="utf-8"></xsl:output><xsl:template name="viewuri"><xsl:param name="v"></xsl:param><li><a href="{$v}"><xsl:value-of select="$v"></xsl:value-of></a></li></xsl:template><xsl:template match="cgt:offres/cgt:offre"><div><div class="title"><xsl:value-of select="current()/cgt:nom"></xsl:value-of></div><xsl:variable name="spec" select="current()/cgt:spec/@urn"></xsl:variable><xsl:if test="$spec = 'urn:fld:descmarket20'"><div><xsl:value-of select="current()/cgt:spec[@urn='urn:fld:descmarket20']/cgt:value" disable-output-escaping="yes"></xsl:value-of></div></xsl:if><xsl:if test="$spec = 'urn:fld:adr'"><xsl:variable name="v" select="current()/cgt:spec[@urn='urn:fld:adr']/cgt:value"></xsl:variable><div><xsl:value-of select="$v"></xsl:value-of></div></xsl:if><xsl:if test="$spec = 'urn:fld:phone1'"><xsl:variable name="v" select="current()/cgt:spec[@urn='urn:fld:phone1']/cgt:value"></xsl:variable><xsl:variable name="type" select="current()/cgt:spec[@urn='urn:fld:phone1']/cgt:type"></xsl:variable><xsl:choose><xsl:when test="$type = 'URL'"><xsl:call-template name="viewuri"><xsl:with-param name="v"><xsl:value-of select="$v"></xsl:value-of></xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><div><xsl:value-of select="$v"></xsl:value-of></div></xsl:otherwise></xsl:choose></xsl:if><xsl:if test="$spec = 'urn:fld:mobi1'"><xsl:variable name="v" select="current()/cgt:spec[@urn='urn:fld:mobi1']/cgt:value"></xsl:variable><xsl:variable name="type" select="current()/cgt:spec[@urn='urn:fld:mobi1']/cgt:type"></xsl:variable><xsl:choose><xsl:when test="$type = 'URL'"><xsl:call-template name="viewuri"><xsl:with-param name="v"><xsl:value-of select="$v"></xsl:value-of></xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><div><xsl:value-of select="$v"></xsl:value-of></div></xsl:otherwise></xsl:choose></xsl:if><xsl:if test="$spec = 'urn:fld:urlweb'"><xsl:variable name="v" select="current()/cgt:spec[@urn='urn:fld:urlweb']/cgt:value"></xsl:variable><xsl:variable name="type" select="current()/cgt:spec[@urn='urn:fld:urlweb']/cgt:type"></xsl:variable><xsl:choose><xsl:when test="$type = 'URL'"><xsl:call-template name="viewuri"><xsl:with-param name="v"><xsl:value-of select="$v"></xsl:value-of></xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><div><xsl:value-of select="$v"></xsl:value-of></div></xsl:otherwise></xsl:choose></xsl:if><xsl:if test="$spec = 'urn:fld:mail1'"><xsl:variable name="uri" select="current()/cgt:spec[@urn='urn:fld:mail1']/cgt:value"></xsl:variable><li><a href="mailto:{$uri}"><xsl:value-of select="$uri"></xsl:value-of></a></li></xsl:if></div></xsl:template></xsl:stylesheet>